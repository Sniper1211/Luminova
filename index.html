<!DOCTYPE html>
<html>
<head>
    <style>
        /* åŸºç¡€æ ·å¼ */
        body {
            margin: 0;
            background: #1a1a1a;
            min-height: 100vh;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            backdrop-filter: blur(5px);
            width: 300px;
        }

        .control-group {
            margin: 10px 0;
        }

        label {
            display: block;
            margin: 8px 0;
            font-size: 14px;
        }

        input[type="range"], input[type="color"] {
            width: 100%;
            margin: 5px 0;
        }

        /* ç²’å­æ ·å¼ä¿æŒä¹‹å‰çš„å¢å¼ºç‰ˆ */
        .particle { /* ...ä¿æŒåŸæœ‰ç²’å­æ ·å¼... */ }
    </style>
</head>
<body>
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <div class="control-group">
            <h3>æ•ˆæœè°ƒèŠ‚å™¨ ğŸ›ï¸</h3>
            <label>ç²’å­æ•°é‡: <input type="number" id="particleCount" value="88" min="10" max="500"></label>
            <input type="range" id="particleRange" min="10" max="500" value="88">
            
            <label>æ‰©æ•£è§’åº¦: <input type="number" id="angleVar" value="80" min="0" max="200"></label>
            <input type="range" id="angleRange" min="0" max="200" value="80">
            
            <label>åŠ¨ç”»æ—¶é•¿: <input type="number" id="duration" value="1.5" step="0.1" min="0.5" max="3"></label>
            <input type="range" id="durationRange" value="1.5" min="0.5" max="3" step="0.1">
            
            <label>é¢œè‰²æ–¹æ¡ˆ:</label>
            <div id="colorPickers">
                <input type="color" value="#ff3366">
                <input type="color" value="#45ffd8">
                <input type="color" value="#7d6fff">
            </div>
            <button onclick="addColorPicker()">+ æ·»åŠ é¢œè‰²</button>
            
            <button onclick="createConfetti()" style="margin-top:15px">ç«‹å³æµ‹è¯•æ•ˆæœ ğŸ‰</button>
        </div>
    </div>

    <script>
        // é…ç½®å‚æ•°
        let config = {
            particleCount: 88,
            angleVar: 80,
            duration: 1.5,
            colors: ['#ff3366', '#45ffd8', '#7d6fff']
        };

        // ç»‘å®šæ§ä»¶äº‹ä»¶
        const bindControls = () => {
            // ç²’å­æ•°é‡
            document.getElementById('particleRange').addEventListener('input', e => {
                document.getElementById('particleCount').value = e.target.value;
                config.particleCount = parseInt(e.target.value);
            });

            // æ‰©æ•£è§’åº¦
            document.getElementById('angleRange').addEventListener('input', e => {
                document.getElementById('angleVar').value = e.target.value;
                config.angleVar = parseInt(e.target.value);
            });

            // åŠ¨ç”»æ—¶é•¿
            document.getElementById('durationRange').addEventListener('input', e => {
                document.getElementById('duration').value = e.target.value;
                config.duration = parseFloat(e.target.value);
            });

            // é¢œè‰²æ›´æ–°
            document.getElementById('colorPickers').addEventListener('change', e => {
                config.colors = Array.from(e.target.parentElement.querySelectorAll('input'))
                    .map(input => input.value);
            });
        };

        // æ·»åŠ é¢œè‰²é€‰æ‹©å™¨
        const addColorPicker = () => {
            const newPicker = document.createElement('input');
            newPicker.type = 'color';
            newPicker.value = '#ffffff';
            document.getElementById('colorPickers').appendChild(newPicker);
            config.colors.push('#ffffff');
        };

        // ä¿®æ”¹åçš„æ’’èŠ±å‡½æ•°
        function createConfetti() {
            // å…ˆæ¸…é™¤æ—§ç²’å­
            document.querySelectorAll('.particle').forEach(p => p.remove());
            
            for(let i = 0; i < config.particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // ä»configè·å–å‚æ•°
                const type = Math.floor(Math.random() * 3);
                const color = config.colors[Math.floor(Math.random() * config.colors.length)];
                const dir = Math.random() > 0.5 ? 1 : -1;
                
                particle.style.setProperty('--tx', (Math.random() - 0.5) * config.angleVar * 2);
                particle.style.setProperty('--r', (Math.random() * 720 * dir));
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.color = color;
                particle.dataset.type = type;

                particle.style.animation = `particleFly ${config.duration + Math.random() * 0.8}s cubic-bezier(0.1, 0.7, 0.3, 1) forwards`;
                
                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        // åˆå§‹åŒ–
        bindControls();
        document.addEventListener('click', createConfetti);
    </script>
</body>
</html>
